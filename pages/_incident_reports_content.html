<!-- Main content for Incident Reports -->
<link rel="stylesheet" href="../css/incident_report.css">
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 mb-0 fade-header">View Incident Reports</h1>
    <div class="input-group search-bar" style="width: 250px;">
        <input type="text" name="table_search" class="form-control" placeholder="Search...">
        <button class="btn-search" type="button">
            <i class="bi bi-search"></i>
        </button>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-body">
        <!-- Design-only filters (no logic) -->
        <div class="row g-2 align-items-center">
            <div class="col-auto">
                <label for="filterYear" class="form-label visually-hidden">Year</label>
                <select id="filterYear" class="form-select form-select-sm">
                    <option selected>All years</option>
                    <option>2025</option>
                    <option>2024</option>
                    <option>2023</option>
                </select>
            </div>

            <div class="col-auto">
                <label for="filterNature" class="form-label visually-hidden">Nature of Incident</label>
                <select id="filterNature" class="form-select form-select-sm">
                    <option selected>All natures</option>
                    <option>Road Crash</option>
                    <option>Fire Incident</option>
                    <option>Landslide</option>
                    <option>Flood</option>
                </select>
            </div>

            <div class="col-auto">
                <button id="clearFilters" class="btn btn-sm btn-outline-secondary align-items-center">Clear Filters</button>
            </div>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover align-middle mt-3">
                <thead class="table-light">
                    <tr>
                        <th>IR #</th>
                        <th>Date & Time</th>
                        <th>Nature of Incident</th>
                        <th>Barangay</th>
                        <th class="text-center">Actions</th>
                    </tr>
                </thead>
                <tbody class="animate-rows">
                    <tr
                        data-ir-id="IR-2025-001"
                        data-ir-datetime="2025-10-23 13:01H"
                        data-ir-nature="Road Crash"
                        data-ir-barangay="Tagbakin"
                        data-ir-description="A collision occurred on the national highway in Brgy. Tagbakin involving a motorcycle (Plate No. ABC-123) and a tricycle (Plate No. XYZ-456). The motorcycle rider, Mr. Juan Dela Cruz, sustained a fractured arm and multiple abrasions."
                        data-ir-actions="The MDRRMO Atimonan response team was dispatched. First aid was administered to the victim on-site before they were stabilized and transported to QPH-Doña Marta for further medical attention. PNP and BFP personnel assisted with scene management and control."
                        data-ir-remarks="--"
                        data-ir-photo="../images/ir-2025-001.jpg"
                    >
                        <td>IR-2025-001</td>
                        <td>2025-10-23 13:01H</td>
                        <td>Road Crash</td>
                        <td>Tagbakin</td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#viewIncidentModal-IR-2025-001" title="View"><i class="bi bi-eye-fill"></i> View</button>
                        </td>
                    </tr>
                    <tr
                        data-ir-id="IR-2025-002"
                        data-ir-datetime="2025-10-24 02:30H"
                        data-ir-nature="Fire Incident"
                        data-ir-barangay="Zone 1 (Poblacion)"
                        data-ir-description="A structural fire broke out at a residential property. The fire originated from the kitchen due to suspected faulty electrical wiring. No casualties reported."
                        data-ir-actions="BFP-Atimonan was the primary responder, with support from MDRRMO for evacuation assistance and PNP for crowd control. The fire was declared out by 0400H."
                        data-ir-remarks="For further assessment by BFP and MSWDO."
                        data-ir-photo="../images/ir-2025-002.jpg"
                    >
                        <td>IR-2025-002</td>
                        <td>2025-10-24 02:30H</td>
                        <td>Fire Incident</td>
                        <td>Zone 1 (Poblacion)</td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#viewIncidentModal-IR-2025-002" title="View"><i class="bi bi-eye-fill"></i> View</button>
                        </td>
                    </tr>
                    <tr
                        data-ir-id="IR-2025-003"
                        data-ir-datetime="2025-10-25 18:00H"
                        data-ir-nature="Landslide"
                        data-ir-barangay="San Andres Bundok"
                        data-ir-description="A minor landslide occurred along the provincial road following continuous heavy rainfall, partially blocking one lane."
                        data-ir-actions="MDRRMO and DPWH personnel were deployed for clearing operations. Warning signs were installed. The road was cleared and declared fully passable by 2100H."
                        data-ir-remarks="Monitoring for potential further soil erosion."
                        data-ir-photo="../images/ir-2025-003.jpg"
                    >
                        <td>IR-2025-003</td>
                        <td>2025-10-25 18:00H</td>
                        <td>Landslide</td>
                        <td>San Andres Bundok</td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#viewIncidentModal-IR-2025-003" title="View"><i class="bi bi-eye-fill"></i> View</button>
                        </td>
                    </tr>
                    <tr
                        data-ir-id="IR-2025-004"
                        data-ir-datetime="2025-10-26 05:00H"
                        data-ir-nature="Flood"
                        data-ir-barangay="Malinao Ilaya"
                        data-ir-description="Flash flood due to an overflowing river affected several low-lying households. Water level reached up to knee-deep."
                        data-ir-actions="Pre-emptive evacuation of 5 families (23 individuals) was conducted by the BDRRMC and MDRRMO. Evacuees were temporarily sheltered at the barangay hall."
                        data-ir-remarks="Residents returned home after water subsided."
                        data-ir-photo="../images/ir-2025-004.jpg"
                    >
                        <td>IR-2025-004</td>
                        <td>2025-10-26 05:00H</td>
                        <td>Flood</td>
                        <td>Malinao Ilaya</td>
                        <td class="text-center">
                            <button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#viewIncidentModal-IR-2025-004" title="View"><i class="bi bi-eye-fill"></i> View</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card-footer bg-white clearfix">
        <ul class="pagination pagination-sm m-0 float-end">
            <li class="page-item"><a class="page-link" href="#">&laquo;</a></li>
            <li class="page-item active"><a class="page-link" href="#">1</a></li>
            <li class="page-item"><a class="page-link" href="#">2</a></li>
            <li class="page-item"><a class="page-link" href="#">3</a></li>
            <li class="page-item"><a class="page-link" href="#">&raquo;</a></li>
        </ul>
    </div>
</div>

<!-- View Incident Modal (shows full info + photo) -->
<div class="modal fade" id="viewIncidentModal" tabindex="-1" aria-labelledby="viewIncidentModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content shadow-lg">
      <div class="modal-header">
        <h5 class="modal-title" id="viewIncidentModalLabel">Incident Report</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6"><strong>IR #:</strong> <div id="viewIrId" class="text-muted"></div></div>
          <div class="col-md-6"><strong>Date & Time:</strong> <div id="viewIrDateTime" class="text-muted"></div></div>
          <div class="col-md-6"><strong>Nature of Incident:</strong> <div id="viewIrNature" class="text-muted"></div></div>
          <div class="col-md-6"><strong>Barangay:</strong> <div id="viewIrBarangay" class="text-muted"></div></div>
          <div class="col-12">
            <strong>Photo / Evidence:</strong>
            <div class="mt-2">
              <img id="viewIrPhoto" src="" alt="Incident photo" class="img-fluid rounded shadow-sm" style="max-height:360px; width:100%; object-fit:cover;">
            </div>
          </div>
          <div class="col-12">
            <strong>Description / Details:</strong>
            <div id="viewIrDescription" class="text-wrap text-muted mt-2"></div>
          </div>
          <div class="col-12">
            <strong>Actions Taken:</strong>
            <div id="viewIrActions" class="text-wrap text-muted mt-2"></div>
          </div>
          <div class="col-12">
            <strong>Remarks:</strong>
            <div id="viewIrRemarks" class="text-wrap text-muted mt-2"></div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<!-- Hard-coded individual View Modals (no JS required) -->
<!-- IR-2025-001 -->
<div class="modal fade" id="viewIncidentModal-IR-2025-001" tabindex="-1" aria-labelledby="viewIncidentModalLabel-IR-2025-001" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content shadow-lg">
      <div class="modal-header">
        <h5 class="modal-title" id="viewIncidentModalLabel-IR-2025-001">Incident Report — IR-2025-001</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6"><strong>IR #:</strong> <div class="text-muted">IR-2025-001</div></div>
          <div class="col-md-6"><strong>Date & Time:</strong> <div class="text-muted">2025-10-23 13:01H</div></div>
          <div class="col-md-6"><strong>Nature of Incident:</strong> <div class="text-muted">Road Crash</div></div>
          <div class="col-md-6"><strong>Barangay:</strong> <div class="text-muted">Tagbakin</div></div>
          <div class="col-12">
            <strong>Photo / Evidence:</strong>
            <div class="mt-2">
              <img src="../images/ir-2025-001.jpg" alt="IR-2025-001 photo" class="img-fluid rounded shadow-sm" style="max-height:360px; width:100%; object-fit:cover;">
            </div>
          </div>
          <div class="col-12">
            <strong>Description / Details:</strong>
            <div class="text-wrap text-muted mt-2">A collision occurred on the national highway in Brgy. Tagbakin involving a motorcycle (Plate No. ABC-123) and a tricycle (Plate No. XYZ-456). The motorcycle rider, Mr. Juan Dela Cruz, sustained a fractured arm and multiple abrasions.</div>
          </div>
          <div class="col-12">
            <strong>Actions Taken:</strong>
            <div class="text-wrap text-muted mt-2">The MDRRMO Atimonan response team was dispatched. First aid was administered to the victim on-site before they were stabilized and transported to QPH-Doña Marta for further medical attention. PNP and BFP personnel assisted with scene management and control.</div>
          </div>
          <div class="col-12">
            <strong>Remarks:</strong>
            <div class="text-wrap text-muted mt-2">--</div>
          </div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button></div>
    </div>
  </div>
</div>

<!-- IR-2025-002 -->
<div class="modal fade" id="viewIncidentModal-IR-2025-002" tabindex="-1" aria-labelledby="viewIncidentModalLabel-IR-2025-002" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content shadow-lg">
      <div class="modal-header">
        <h5 class="modal-title" id="viewIncidentModalLabel-IR-2025-002">Incident Report — IR-2025-002</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6"><strong>IR #:</strong> <div class="text-muted">IR-2025-002</div></div>
          <div class="col-md-6"><strong>Date & Time:</strong> <div class="text-muted">2025-10-24 02:30H</div></div>
          <div class="col-md-6"><strong>Nature of Incident:</strong> <div class="text-muted">Fire Incident</div></div>
          <div class="col-md-6"><strong>Barangay:</strong> <div class="text-muted">Zone 1 (Poblacion)</div></div>
          <div class="col-12">
            <strong>Photo / Evidence:</strong>
            <div class="mt-2">
              <img src="../images/ir-2025-002.jpg" alt="IR-2025-002 photo" class="img-fluid rounded shadow-sm" style="max-height:360px; width:100%; object-fit:cover;">
            </div>
          </div>
          <div class="col-12">
            <strong>Description / Details:</strong>
            <div class="text-wrap text-muted mt-2">A structural fire broke out at a residential property. The fire originated from the kitchen due to suspected faulty electrical wiring. No casualties reported.</div>
          </div>
          <div class="col-12">
            <strong>Actions Taken:</strong>
            <div class="text-wrap text-muted mt-2">BFP-Atimonan was the primary responder, with support from MDRRMO for evacuation assistance and PNP for crowd control. The fire was declared out by 0400H.</div>
          </div>
          <div class="col-12">
            <strong>Remarks:</strong>
            <div class="text-wrap text-muted mt-2">For further assessment by BFP and MSWDO.</div>
          </div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button></div>
    </div>
  </div>
</div>

<!-- IR-2025-003 -->
<div class="modal fade" id="viewIncidentModal-IR-2025-003" tabindex="-1" aria-labelledby="viewIncidentModalLabel-IR-2025-003" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content shadow-lg">
      <div class="modal-header">
        <h5 class="modal-title" id="viewIncidentModalLabel-IR-2025-003">Incident Report — IR-2025-003</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6"><strong>IR #:</strong> <div class="text-muted">IR-2025-003</div></div>
          <div class="col-md-6"><strong>Date & Time:</strong> <div class="text-muted">2025-10-25 18:00H</div></div>
          <div class="col-md-6"><strong>Nature of Incident:</strong> <div class="text-muted">Landslide</div></div>
          <div class="col-md-6"><strong>Barangay:</strong> <div class="text-muted">San Andres Bundok</div></div>
          <div class="col-12">
            <strong>Photo / Evidence:</strong>
            <div class="mt-2">
              <img src="../images/ir-2025-003.jpg" alt="IR-2025-003 photo" class="img-fluid rounded shadow-sm" style="max-height:360px; width:100%; object-fit:cover;">
            </div>
          </div>
          <div class="col-12">
            <strong>Description / Details:</strong>
            <div class="text-wrap text-muted mt-2">A minor landslide occurred along the provincial road following continuous heavy rainfall, partially blocking one lane.</div>
          </div>
          <div class="col-12">
            <strong>Actions Taken:</strong>
            <div class="text-wrap text-muted mt-2">MDRRMO and DPWH personnel were deployed for clearing operations. Warning signs were installed. The road was cleared and declared fully passable by 2100H.</div>
          </div>
          <div class="col-12">
            <strong>Remarks:</strong>
            <div class="text-wrap text-muted mt-2">Monitoring for potential further soil erosion.</div>
          </div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button></div>
    </div>
  </div>
</div>

<!-- IR-2025-004 -->
<div class="modal fade" id="viewIncidentModal-IR-2025-004" tabindex="-1" aria-labelledby="viewIncidentModalLabel-IR-2025-004" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-xl">
    <div class="modal-content shadow-lg">
      <div class="modal-header">
        <h5 class="modal-title" id="viewIncidentModalLabel-IR-2025-004">Incident Report — IR-2025-004</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="row g-3">
          <div class="col-md-6"><strong>IR #:</strong> <div class="text-muted">IR-2025-004</div></div>
          <div class="col-md-6"><strong>Date & Time:</strong> <div class="text-muted">2025-10-26 05:00H</div></div>
          <div class="col-md-6"><strong>Nature of Incident:</strong> <div class="text-muted">Flood</div></div>
          <div class="col-md-6"><strong>Barangay:</strong> <div class="text-muted">Malinao Ilaya</div></div>
          <div class="col-12">
            <strong>Photo / Evidence:</strong>
            <div class="mt-2">
              <img src="../images/ir-2025-004.jpg" alt="IR-2025-004 photo" class="img-fluid rounded shadow-sm" style="max-height:360px; width:100%; object-fit:cover;">
            </div>
          </div>
          <div class="col-12">
            <strong>Description / Details:</strong>
            <div class="text-wrap text-muted mt-2">Flash flood due to an overflowing river affected several low-lying households. Water level reached up to knee-deep.</div>
          </div>
          <div class="col-12">
            <strong>Actions Taken:</strong>
            <div class="text-wrap text-muted mt-2">Pre-emptive evacuation of 5 families (23 individuals) was conducted by the BDRRMC and MDRRMO. Evacuees were temporarily sheltered at the barangay hall.</div>
          </div>
          <div class="col-12">
            <strong>Remarks:</strong>
            <div class="text-wrap text-muted mt-2">Residents returned home after water subsided.</div>
          </div>
        </div>
      </div>
      <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button></div>
    </div>
  </div>
</div>

<!-- page-specific script to populate view modal -->
<script src="../js/incident_reports.js"></script>
